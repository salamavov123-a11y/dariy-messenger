:root { --text:#f5ecff; --muted:#bfaed4; --violet:#9f46ff; --violet-dark:#5d23b9; }
*{box-sizing:border-box}
body{margin:0;min-height:100vh;font-family:Inter,"Segoe UI",sans-serif;color:var(--text);background:radial-gradient(circle at 12% 9%, rgba(159,70,255,.24), transparent 46%),radial-gradient(circle at 88% 84%, rgba(93,35,185,.3), transparent 45%),linear-gradient(160deg,#030206 0%,#0a0614 48%,#110a1e 100%);display:grid;place-items:center;padding:1.2rem;overflow:hidden;background-color:transparent}
h1,h2,h3,p{margin:0}.hidden{display:none!important}.muted{color:var(--muted);font-size:.92rem}.hint{min-height:1.2rem;color:#f4c7ff;font-size:.86rem}
.status-dot{width:9px;height:9px;border-radius:50%;display:inline-block;margin-right:.2rem}.status-dot.online{background:#53ffaf;box-shadow:0 0 8px rgba(83,255,175,.7)}.status-dot.offline{background:#8a7aa1}
.glow{position:fixed;pointer-events:none;width:24rem;height:24rem;border-radius:999px;filter:blur(80px)}.glow-top{top:-8rem;right:-4rem;background:rgba(199,125,255,.22)}.glow-bottom{left:-9rem;bottom:-8rem;background:rgba(93,35,185,.32)}
.app-shell{position:relative;z-index:2;width:min(1200px,100%);min-height:min(92vh,840px);border:none;background:rgba(8,6,14,.9);border-radius:28px;overflow:hidden;box-shadow:0 0 30px rgba(145,62,236,.25)}
.auth-screen{max-width:440px;margin:2.5rem auto;border:1px solid rgba(193,132,255,.45);border-radius:18px;padding:1.3rem;background:rgba(16,10,29,.88);display:grid;gap:.9rem}
.auth-tabs,.person-actions{display:grid;grid-template-columns:1fr 1fr;gap:.45rem}
.tab-btn,.side-btn,.primary,.ghost,.inline-btn{border-radius:12px;border:1px solid rgba(180,119,255,.38);background:rgba(39,26,58,.55);color:var(--text);padding:.62rem .85rem;cursor:pointer}
.tab-btn.active,.side-btn.active,.primary{background:linear-gradient(135deg,var(--violet),var(--violet-dark))}.ghost,.inline-btn{background:rgba(26,18,40,.66)}.inline-btn{padding:.2rem .45rem;font-size:.8rem}
.stack-form{display:grid;gap:.72rem}.stack-form label{display:grid;gap:.35rem;color:var(--muted);font-size:.9rem}
input,fieldset{border:1px solid rgba(180,119,255,.45);border-radius:12px;background:rgba(30,20,47,.78);color:var(--text);padding:.65rem .8rem}
fieldset{margin:0}.chat-app{display:grid;grid-template-columns:350px 1fr;min-height:min(92vh,840px)}
.sidebar{border-right:1px solid rgba(173,114,255,.25);background:rgba(15,10,26,.88);display:grid;align-content:start;gap:1rem;padding:1rem}
.profile-card{border:1px solid rgba(173,114,255,.3);border-radius:16px;display:flex;gap:.8rem;align-items:center;padding:.85rem;background:linear-gradient(rgba(11,8,20,.64),rgba(11,8,20,.64)),var(--profile-bg,linear-gradient(120deg,#2f1655,#10091d));background-size:cover}.user-status{display:flex;align-items:center;gap:.35rem;color:#caafff;font-size:.84rem}
.avatar-frame{border:3px solid var(--avatar-border,#c77dff);border-radius:999px;box-shadow:0 0 16px rgba(199,125,255,.45);width:56px;height:56px;overflow:hidden;flex-shrink:0}.avatar-frame img{width:100%;height:100%;object-fit:cover}
.sidebar-actions{display:grid;gap:.45rem}.panel-block{border:1px solid rgba(173,114,255,.24);border-radius:14px;padding:.7rem;background:rgba(29,20,44,.56);display:grid;gap:.7rem}
.chat-list{display:grid;gap:.45rem;max-height:220px;overflow-y:auto}.chat-item,.person-card{text-align:left;border:1px solid rgba(173,114,255,.35);border-radius:12px;background:rgba(37,24,58,.65);color:var(--text);padding:.56rem .7rem}.chat-item{width:100%;cursor:pointer}.chat-item.active{border-color:rgba(217,160,255,.8)}.person-card{display:grid;gap:.45rem}
.user-select-list{display:grid;gap:.5rem;max-height:160px;overflow-y:auto}.user-select-item{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:.5rem;font-size:.85rem;padding:.45rem;border-radius:10px;background:rgba(46,30,68,.65)}
.chat-window{display:grid;grid-template-rows:auto 1fr auto auto;gap:.8rem;padding:1rem}.chat-header,.messages{border:1px solid rgba(173,114,255,.2);border-radius:14px;background:rgba(16,10,27,.58)}.chat-header{padding:.7rem .8rem;background:rgba(22,14,36,.65)}
.messages{padding:.9rem;overflow-y:auto;display:flex;flex-direction:column;gap:.6rem}
.bubble{max-width:80%;border-radius:14px;border:1px solid rgba(173,114,255,.24);padding:.6rem .85rem;line-height:1.35}.bubble.outgoing{margin-left:auto;background:linear-gradient(135deg,rgba(134,59,226,.78),rgba(96,43,175,.82))}.bubble.incoming{background:rgba(42,29,64,.7)}.bubble small{display:block;margin-bottom:.2rem;color:#d9c4f5}.bubble p{margin:.35rem 0 0}.bubble time{margin-top:.38rem;display:inline-block;font-size:.76rem;color:#c7afea}.reply-quote{border-left:2px solid #d39cff;padding-left:.45rem;color:#ddc6ff;font-size:.82rem;margin-bottom:.2rem}
.message-photo{max-width:100%;border-radius:10px;margin-top:.35rem}.message-audio{width:100%;margin-top:.35rem}
.composer{display:grid;grid-template-columns:1fr minmax(130px,170px) auto auto;gap:.55rem}.reply-preview{grid-column:1 / -1;border:1px solid rgba(173,114,255,.4);border-radius:10px;padding:.45rem .6rem;background:rgba(49,32,73,.65);display:flex;justify-content:space-between;align-items:center}
.settings-dialog{border:1px solid rgba(210,160,255,.55);border-radius:16px;background:rgba(14,8,23,.94);color:var(--text);padding:0}.settings-dialog::backdrop{background:rgba(0,0,0,.42)}
.settings-dialog form,.profile-view-content{padding:1rem;min-width:min(90vw,460px)}.rgb-grid{display:grid;gap:.55rem}.rgb-preview{border:1px solid rgba(173,114,255,.4);border-radius:10px;padding:.55rem;font-size:.82rem}.dialog-actions{display:flex;justify-content:flex-end;gap:.55rem}
@media (max-width:900px){.chat-app{grid-template-columns:1fr}.sidebar{border-right:0;border-bottom:1px solid rgba(173,114,255,.25)}.composer{grid-template-columns:1fr 1fr}}

.scroll-bottom-btn{position:absolute;right:1.6rem;bottom:6.2rem;z-index:4}
.chat-header,.sidebar-actions{ -webkit-app-region: drag; user-select:none; }
button,input,textarea,audio,img,.messages,.chat-list,.panel-block,.composer,.reply-preview,.person-card{ -webkit-app-region: no-drag; }
.chat-window{position:relative;}
